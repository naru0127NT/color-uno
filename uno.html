<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>色覚多様性UNO（プレイ画面）</title>

  <link rel="stylesheet" href="./style.css?v=2">
  <link rel="stylesheet" href="./filter.css?v=2">
  <link rel="stylesheet" href="./exhibit.css?v=3">

  <script src="./filter.js?v=2" defer></script>
  <script src="./uno.js?v=2" defer></script>
</head>

<body>

  <!-- ★ 色覚シミュレーション用フィルタ（index.html と同じ） -->
  <svg width="0" height="0">
    <!-- 1型（プロタン） 軽度・中度・重度 -->
    <filter id="protanLight">
      <feColorMatrix type="matrix"
        values="
          0.7456858 0.3157749 -0.0614604 0 0
          0.0343509 0.9358843  0.0297648 0 0
         -0.0011646 -0.0144348 1.0155994 0 0
          0        0         0         1 0" />
    </filter>

    <filter id="protanMid">
      <feColorMatrix type="matrix"
        values="
          0.4913716 0.6315498 -0.1229208 0 0
          0.0687018 0.8717686  0.0595296 0 0
         -0.0023292 -0.0288696 1.0311988 0 0
          0        0         0         1 0" />
    </filter>

    <filter id="protanStrong">
      <feColorMatrix type="matrix"
        values="
          0.152286 1.052583 -0.204868 0 0
          0.114503 0.786281  0.099216 0 0
         -0.003882 -0.048116 1.051998 0 0
          0        0        0        1 0" />
    </filter>

    <!-- 2型（デューテラン） 軽度・中度・重度 -->
    <filter id="deutanLight">
      <feColorMatrix type="matrix"
        values="
          0.8101966 0.2581938 -0.0683904 0 0
          0.0840255 0.9017503  0.0142239 0 0
         -0.003546  0.012882   0.9906643 0 0
          0        0         0         1 0" />
    </filter>

    <filter id="deutanMid">
      <feColorMatrix type="matrix"
        values="
          0.6203932 0.5163876 -0.1367808 0 0
          0.168051  0.8035006  0.0284478 0 0
         -0.007092  0.025764   0.9813286 0 0
          0        0         0         1 0" />
    </filter>

    <filter id="deutanStrong">
      <feColorMatrix type="matrix"
        values="
          0.367322 0.860646 -0.227968 0 0
          0.280085 0.672501  0.047413 0 0
         -0.01182  0.04294   0.968881 0 0
          0        0        0        1 0" />
    </filter>

    <!-- 3型（トリタン） 軽度・中度・重度 -->
    <filter id="tritanLight">
      <feColorMatrix type="matrix"
        values="
          1.0766584 -0.0230247 -0.0536337 0 0
         -0.0235233  0.9792427  0.0442806 0 0
          0.0014199  0.2074101  0.79117   0 0
          0         0         0         1 0" />
    </filter>

    <filter id="tritanMid">
      <feColorMatrix type="matrix"
        values="
          1.1533168 -0.0460494 -0.1072674 0 0
         -0.0470466  0.9584854  0.0885612 0 0
          0.0028398  0.4148202  0.58234   0 0
          0         0         0         1 0" />
    </filter>

    <filter id="tritanStrong">
      <feColorMatrix type="matrix"
        values="
          1.255528 -0.076749 -0.178779 0 0
         -0.078411  0.930809  0.147602 0 0
          0.004733  0.691367  0.3039   0 0
          0        0        0        1 0" />
    </filter>
  </svg>
  <!-- ★ SVGフィルタここまで -->

  <h1>色覚多様性UNO（プレイ画面）</h1>

  <!-- フィルタ切り替えUI（トップと同じ） -->
<div class="filter-switch">
  <h2>色覚フィルタ切り替え</h2>

  <div class="filter-buttons">
    <button onclick="setFilter('none')">通常</button>
    <button onclick="setFilter('protan')">1型</button>
    <button onclick="setFilter('deutan')">2型</button>
    <button onclick="setFilter('tritan')">3型</button>
  </div>
</div>

  <!-- 強さスライダー -->
  <div id="severity-control">
    <div id="severity-row">
      <span id="severity-title">フィルタの強さ：</span>
      <div id="severity-wrapper">
        <input type="range" id="severity" min="1" max="3" value="3">
        <div class="severity-ticks">
          <span>軽度</span><span>中度</span><span>重度</span>
        </div>
      </div>
      <span id="severity-label">重度</span>
    </div>
  </div>

  <!-- カードテーマ切り替え -->
<div id="design-control" class="design">
  <div class="design-head">
    <span class="design-label">カードデザイン：</span>

    <button type="button" id="themeBtn" class="design-btn" aria-haspopup="listbox" aria-expanded="false">
      色配慮なし
      <span class="design-caret">▾</span>
    </button>
  </div>

  <div id="themeMenu" class="design-menu" role="listbox" aria-label="カードデザイン" hidden>
    <button type="button" class="design-item" data-value="theme-unfriendly">色配慮なし</button>
    <button type="button" class="design-item" data-value="theme-a">リデザインA</button>
    <button type="button" class="design-item" data-value="theme-b">リデザインB</button>
    <button type="button" class="design-item" data-value="theme-c">リデザインC</button>
    <button type="button" class="design-item" data-value="theme-d">リデザインD</button>
  </div>

  <!-- 元のselectは残してもいいけど、今回は不要なので消してOK -->

  <p class="design-note">
    デザイン（リデザインA〜D）は、色覚シミュレーションの体験とUNO制作を通して、<br>
  「誰にでも伝わる設計」を考えるワークショップ（第3回）で参加者と一緒に作った<br>
    改善案を使用しています。
  </p>

  <select id="cardTheme" style="display:none;">
  <option value="theme-unfriendly">色配慮なし</option>
  <option value="theme-a">リデザインA</option>
  <option value="theme-b">リデザインB</option>
  <option value="theme-c">リデザインC</option>
  <option value="theme-d">リデザインD</option>
</select>

</div>

  <!-- ▼ UNO プレイエリア -->
<div id="filtered">
  <section id="uno">
    <h2>UNOで色の見え方を体験する</h2>
    <p class="description">
        山札16枚（1〜3の各4色＋リバース2枚＋スキップ2枚）を使った1人用UNOです。<br>
        場のカードと「色」か「数字/記号」が合っていれば、そのカードを出せます。<br>
        出せないときは「1枚ひく」で山札からカードを引いてください。
    </p>

    <div id="table">
      <div id="discardArea">
        <h3>場のカード</h3>
        <div id="discard"></div>
      </div>

      <div id="deckArea">
        <h3>山札</h3>
        <div id="deckInfo">
          残り <span id="deckCount">0</span> 枚
        </div>
        <button id="drawButton">1枚ひく</button>
        <button id="restartButton">リセット</button>
        <div id="message"></div>
      </div>
    </div>

    <div id="handArea">
      <h3>あなたの手札</h3>
      <div id="hand"></div>
    </div>

    <div id="cpuArea">
      <h3>CPUの手札（枚数のみ）</h3>
      <div id="cpuCount">0枚</div>
    </div>
  </section>
</div>


  <button onclick="location.href='index.html'">
    ← 説明ページに戻る
  </button>


</body>
</html>
